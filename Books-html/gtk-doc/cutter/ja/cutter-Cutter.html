<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Cutter</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="index.html" title="Cutterリファレンスマニュアル">
<link rel="up" href="writing-test.html" title="テスト作成">
<link rel="prev" href="writing-test.html" title="テスト作成">
<link rel="next" href="cutter-Version-Information.html" title="バージョン情報">
<meta name="generator" content="GTK-Doc V1.15 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="writing-test.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="writing-test.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">Cutterリファレンスマニュアル</th>
<td><a accesskey="n" href="cutter-Version-Information.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#cutter-Cutter.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#cutter-Cutter.description" class="shortcut">説明</a>
</td></tr>
</table>
<div class="refentry" title="Cutter">
<a name="cutter-Cutter"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="cutter-Cutter.top_of_page"></a>Cutter</span></h2>
<p>Cutter — C言語・C++言語用単体テストフレームワーク</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv" title="概要">
<a name="cutter-Cutter.synopsis"></a><h2>概要</h2>
<pre class="synopsis"><span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#setup" title="setup ()">setup</a>                               (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-setup" title="cut_setup ()">cut_setup</a>                           (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#teardown" title="teardown ()">teardown</a>                            (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-teardown" title="cut_teardown ()">cut_teardown</a>                        (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-startup" title="cut_startup ()">cut_startup</a>                         (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-shutdown" title="cut_shutdown ()">cut_shutdown</a>                        (<em class="parameter"><code><span class="type">void</span></code></em>);
#define             <a class="link" href="cutter-Cutter.html#cut-add-data" title="cut_add_data()">cut_add_data</a>                        (first_data_name,
                                                         ...)
#define             <a class="link" href="cutter-Cutter.html#cut-add-data-backward-compatibility" title="cut_add_data_backward_compatibility()">cut_add_data_backward_compatibility</a> (context,
                                                         ...)
#define             <a class="link" href="cutter-Cutter.html#cut-set-attributes" title="cut_set_attributes()">cut_set_attributes</a>                  (first_attribute_name,
                                                         ...)
#define             <a class="link" href="cutter-Cutter.html#cut-get-current-test-context" title="cut_get_current_test_context">cut_get_current_test_context</a>
#define             <a class="link" href="cutter-Cutter.html#cut-set-current-test-context" title="cut_set_current_test_context()">cut_set_current_test_context</a>        (test_context)
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-set-message" title="cut_set_message ()">cut_set_message</a>                     (<em class="parameter"><code>const <span class="type">char</span> *format</code></em>,
                                                         <em class="parameter"><code>...</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-set-message-va-list" title="cut_set_message_va_list ()">cut_set_message_va_list</a>             (<em class="parameter"><code>const <span class="type">char</span> *format</code></em>,
                                                         <em class="parameter"><code><span class="type">va_list</span> args</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-keep-message" title="cut_keep_message ()">cut_keep_message</a>                    (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">void</span>                <a class="link" href="cutter-Cutter.html#cut-message" title="cut_message ()">cut_message</a>                         (<em class="parameter"><code>const <span class="type">char</span> *format</code></em>,
                                                         <em class="parameter"><code>...</code></em>);
#define             <a class="link" href="cutter-Cutter.html#CUT-EXPORT:CAPS" title="CUT_EXPORT">CUT_EXPORT</a>
</pre>
</div>
<div class="refsect1" title="説明">
<a name="cutter-Cutter.description"></a><h2>説明</h2>
<p>Cutterは以下のような特徴をもったC言語・C++言語用の単体テストフレームワークです。</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<p>簡単に使えます。Cutterではテストプログラム中にCUTTER_DEFINE_TEST_STARTやCUTTER_DEFINE_TEST_ENDなどといった不思議なマクロを使う必要がありません。通常のプログラムと同じようにテストプログラムを書くことができます。ただし、プログラムが期待した通り動作していることを検証するために<code class="function">cut_assert_XXX()</code>を使う必要があります。</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="preproc">#include &lt;cutter.h&gt;</span>
<span class="preproc">#include</span> <span class="gtkdoc dstr">&quot;my-stack.h&quot;</span><span class="preproc"></span>

<span class="gtkdoc kwb">void</span>
<span class="function">test_my_stack</span> <span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">)</span>
<span class="symbol">{</span>
    MyStack <span class="symbol">*</span>stack <span class="symbol">=</span> <span class="function">my_stack_new</span><span class="symbol">();</span>

    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-not-null">cut_assert_not_null</a></span><span class="symbol">(</span>stack<span class="symbol">);</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert">cut_assert</a></span><span class="symbol">(</span><span class="function">my_stack_is_empty</span><span class="symbol">(</span>stack<span class="symbol">));</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-int">cut_assert_equal_int</a></span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span> <span class="function">my_stack_get_size</span><span class="symbol">(</span>stack<span class="symbol">));</span>

    <span class="function">my_stack_push</span><span class="symbol">(</span>stack<span class="symbol">,</span> <span class="number">10</span><span class="symbol">);</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert">cut_assert</a></span><span class="symbol">(!</span><span class="function">my_stack_is_empty</span><span class="symbol">(</span>stack<span class="symbol">));</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-int">cut_assert_equal_int</a></span><span class="symbol">(</span><span class="number">1</span><span class="symbol">,</span> <span class="function">my_stack_get_size</span><span class="symbol">(</span>stack<span class="symbol">));</span>

    <span class="function">my_stack_push</span><span class="symbol">(</span>stack<span class="symbol">,</span> <span class="number">20</span><span class="symbol">);</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-int">cut_assert_equal_int</a></span><span class="symbol">(</span><span class="number">2</span><span class="symbol">,</span> <span class="function">my_stack_get_size</span><span class="symbol">(</span>stack<span class="symbol">));</span>

    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal">cut_assert_equal</a></span><span class="symbol">(</span><span class="number">20</span><span class="symbol">,</span> <span class="function">my_stack_pop</span><span class="symbol">(</span>stack<span class="symbol">));</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert">cut_assert</a></span><span class="symbol">(!</span><span class="function">my_stack_is_empty</span><span class="symbol">(</span>stack<span class="symbol">));</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-int">cut_assert_equal_int</a></span><span class="symbol">(</span><span class="number">1</span><span class="symbol">,</span> <span class="function">my_stack_get_size</span><span class="symbol">(</span>stack<span class="symbol">));</span>

    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal">cut_assert_equal</a></span><span class="symbol">(</span><span class="number">10</span><span class="symbol">,</span> <span class="function">my_stack_pop</span><span class="symbol">(</span>stack<span class="symbol">));</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert">cut_assert</a></span><span class="symbol">(</span><span class="function">my_stack_is_empty</span><span class="symbol">(</span>stack<span class="symbol">));</span>
    <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-int">cut_assert_equal_int</a></span><span class="symbol">(</span><span class="number">0</span><span class="symbol">,</span> <span class="function">my_stack_get_size</span><span class="symbol">(</span>stack<span class="symbol">));</span>
<span class="symbol">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

</li>
<li class="listitem">
<p>簡素ですが有用な情報を出力をします。Cutterはデフォルトではテストが問題なく動いているときは静かに動きます。以下は、Cutter自身のテストの出力です。</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="symbol">...........................................................</span>

Finished in <span class="number">0.213021</span> seconds

<span class="number">59</span> <span class="function">test</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">246</span> <span class="function">assertion</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">0</span> <span class="function">failure</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">0</span> <span class="function">error</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">0</span> <span class="function">pending</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">0</span> <span class="function">notification</span><span class="symbol">(</span>s<span class="symbol">)</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>Cutterはテストが1つパスしたことを示すためには「.」だけを出力し、最後にテスト結果の要約を出力します。Cutterは各テストの名前や何個検証したかなどの情報は表示しません。これは、テスト成功時にはこれらの情報は必要ないからです。</p>
<p>Cutterは失敗時にはたくさんの情報を出力します。</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="symbol">.....................</span>F<span class="symbol">.....................................</span>

<span class="number">1</span><span class="symbol">)</span> Failure<span class="symbol">:</span> test_error
<span class="symbol">&lt;</span><span class="string">&quot;Strange&quot;</span> <span class="symbol">==</span> <span class="function">cut_test_result_get_test_name</span><span class="symbol">(</span>result<span class="symbol">)&gt;</span>
expected<span class="symbol">: &lt;</span>Strange<span class="symbol">!!!&gt;</span>
 but was<span class="symbol">: &lt;</span>dummy<span class="symbol">-</span>error<span class="symbol">-</span>test<span class="symbol">&gt;</span>
test<span class="symbol">/</span>test<span class="symbol">-</span>cut<span class="symbol">-</span>assertions<span class="symbol">.</span>c<span class="symbol">:</span><span class="number">240</span><span class="symbol">:</span> <span class="function">cut_assert_test_result</span><span class="symbol">()</span>

Finished in <span class="number">0.223657</span> seconds

<span class="number">59</span> <span class="function">test</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">242</span> <span class="function">assertion</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">1</span> <span class="function">failure</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">0</span> <span class="function">error</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">0</span> <span class="function">pending</span><span class="symbol">(</span>s<span class="symbol">),</span> <span class="number">0</span> <span class="function">notification</span><span class="symbol">(</span>s<span class="symbol">)</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>上記の結果はCutterの自己テストにおかしな期待値を追加したために起きています。</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-string">cut_assert_equal_string</a></span><span class="symbol">(</span><span class="string">&quot;Strange!!!&quot;</span><span class="symbol">,</span> <span class="function">cut_test_result_get_test_name</span><span class="symbol">(</span>result<span class="symbol">));</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p>おかしな検証はtest/test-cut-assertions.cの240行目に書かれていて、その行は<code class="function">cut_assert_test_result()</code>関数内にあります。この関数はtest_errorテストから呼び出されています。cut_test_result_get_test_name(result)が"Strange!!!"を返すことを期待していますが、実際は"dummy-error-name"が返ってきています。このような情報を上記のCutterの出力から得ることができます。これはデバッグの手助けになるでしょう。</p>
<p>Cutterの出力形式は実用的です。' but was:'はその上の'expected:'と並ぶようにインデントされています。これは期待値と実測値をパッと見て簡単に比較できるようにするためです。問題のあった行は「ファイル名:行: 関数」というように整形されています。これはEmacsと連携するためです。Emacsのcompilation-modeではこの形式が*compilation*バッファに表れると、next-errorコマンド(C-x `)で「ファイル名」の「行」へジャンプすることができます。これは問題行を素早く見つける手助けをします。</p>
<p>Cutterは簡単にテストを書くことを支援するだけではなく、簡単にデバッグをできることも支援します。</p>
</li>
</ul></div>
</div>
<div class="refsect1" title="詳細">
<a name="cutter-Cutter.details"></a><h2>詳細</h2>
<div class="refsect2" title="setup ()">
<a name="setup"></a><h3>setup ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                setup                               (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">setup</code>はバージョン1.0.7から非推奨になりました。新しく書くコードでは使わないでください。代わりに<a class="link" href="cutter-Cutter.html#cut-setup" title="cut_setup ()"><code class="function">cut_setup()</code></a>を使ってください。</p>
</div>
<p>テストプログラム中で<a class="link" href="cutter-Cutter.html#setup" title="setup ()"><code class="function">setup()</code></a>を定義していたら、cutterは各テストが実行される前に定義された<a class="link" href="cutter-Cutter.html#setup" title="setup ()"><code class="function">setup()</code></a>を呼びだします。<code class="function">cut_setup()</code>が定義されていた場合は、<a class="link" href="cutter-Cutter.html#setup" title="setup ()"><code class="function">setup()</code></a>は無視されます。</p>
</div>
<hr>
<div class="refsect2" title="cut_setup ()">
<a name="cut-setup"></a><h3>cut_setup ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_setup                           (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>テストプログラム中で<code class="function">cut_setup()</code>を定義していたら、cutterは各テストが実行される前に定義された<code class="function">cut_setup()</code>を呼びだします。<a class="link" href="cutter-Cutter.html#cut-setup" title="cut_setup ()"><code class="function">cut_setup()</code></a>と<a class="link" href="cutter-Cutter.html#setup" title="setup ()"><code class="function">setup()</code></a>が定義されていた場合は<a class="link" href="cutter-Cutter.html#cut-setup" title="cut_setup ()"><code class="function">cut_setup()</code></a>だけが使われます。</p>
<p class="since">1.0.6から</p>
</div>
<hr>
<div class="refsect2" title="teardown ()">
<a name="teardown"></a><h3>teardown ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                teardown                            (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">teardown</code>はバージョン1.0.7から非推奨になりました。新しく書くコードでは使わないでください。代わりに<a class="link" href="cutter-Cutter.html#cut-teardown" title="cut_teardown ()"><code class="function">cut_teardown()</code></a>を使ってください。</p>
</div>
<p>テストプログラム中で<a class="link" href="cutter-Cutter.html#teardown" title="teardown ()"><code class="function">teardown()</code></a>を定義していたら、cutterは各テストの後に、たとえテストが失敗していた時でも、<a class="link" href="cutter-Cutter.html#teardown" title="teardown ()"><code class="function">teardown()</code></a>を呼びだします。<a class="link" href="cutter-Cutter.html#cut-teardown" title="cut_teardown ()"><code class="function">cut_teardown()</code></a>が定義されていた場合は、<a class="link" href="cutter-Cutter.html#teardown" title="teardown ()"><code class="function">teardown()</code></a>は無視されます。</p>
</div>
<hr>
<div class="refsect2" title="cut_teardown ()">
<a name="cut-teardown"></a><h3>cut_teardown ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_teardown                        (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>テストプログラム中で<a class="link" href="cutter-Cutter.html#cut-teardown" title="cut_teardown ()"><code class="function">cut_teardown()</code></a>を定義していたら、cutterは各テストの後に、たとえテストが失敗していた時でも、<a class="link" href="cutter-Cutter.html#cut-teardown" title="cut_teardown ()"><code class="function">cut_teardown()</code></a>を呼びだします。<a class="link" href="cutter-Cutter.html#cut-teardown" title="cut_teardown ()"><code class="function">cut_teardown()</code></a>と<a class="link" href="cutter-Cutter.html#teardown" title="teardown ()"><code class="function">teardown()</code></a>が定義されていた場合は<a class="link" href="cutter-Cutter.html#cut-teardown" title="cut_teardown ()"><code class="function">cut_teardown()</code></a>だけが使われます。</p>
<p class="since">1.0.6から</p>
</div>
<hr>
<div class="refsect2" title="cut_startup ()">
<a name="cut-startup"></a><h3>cut_startup ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_startup                         (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>テストプログラム中で<a class="link" href="cutter-Cutter.html#cut-startup" title="cut_startup ()"><code class="function">cut_startup()</code></a>を定義していたら、cutterは各テストケースが実行される前に定義された<a class="link" href="cutter-Cutter.html#cut-startup" title="cut_startup ()"><code class="function">cut_startup()</code></a>を呼びだします。<a class="link" href="cutter-Cutter.html#cut-startup" title="cut_startup ()"><code class="function">cut_startup()</code></a>と<code class="function">startup()</code>が定義されていた場合は<a class="link" href="cutter-Cutter.html#cut-startup" title="cut_startup ()"><code class="function">cut_startup()</code></a>だけが使われます。</p>
<p class="since">1.0.6から</p>
</div>
<hr>
<div class="refsect2" title="cut_shutdown ()">
<a name="cut-shutdown"></a><h3>cut_shutdown ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_shutdown                        (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>テストプログラム中で<code class="function">shutdown()</code>を定義していたら、cutterは各テストケースが実行された後に定義された<code class="function">shutdown()</code>を呼びだします。<a class="link" href="cutter-Cutter.html#cut-shutdown" title="cut_shutdown ()"><code class="function">cut_shutdown()</code></a>と<code class="function">shutdown()</code>が定義されていた場合は<a class="link" href="cutter-Cutter.html#cut-shutdown" title="cut_shutdown ()"><code class="function">cut_shutdown()</code></a>だけが使われます。</p>
<p class="since">1.0.6から</p>
</div>
<hr>
<div class="refsect2" title="cut_add_data()">
<a name="cut-add-data"></a><h3>cut_add_data()</h3>
<pre class="programlisting">#define             cut_add_data(first_data_name, ...)</pre>
<p>データ駆動テストで使うデータを追加します。</p>
<p>例: </p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="preproc">#include &lt;cutter.h&gt;</span>

<span class="gtkdoc kwb">void</span> <span class="function">data_translate</span> <span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">);</span>
<span class="gtkdoc kwb">void</span> <span class="function">test_translate</span> <span class="symbol">(</span><span class="gtkdoc kwb">const void</span> <span class="symbol">*</span>data<span class="symbol">);</span>

<span class="gtkdoc kwb">static const char</span><span class="symbol">*</span>
<span class="function">translate</span> <span class="symbol">(</span><span class="gtkdoc kwb">int</span> input<span class="symbol">)</span>
<span class="symbol">{</span>
   <span class="keyword">switch</span><span class="symbol">(</span>input<span class="symbol">) {</span>
   <span class="keyword">case</span> <span class="number">1</span><span class="symbol">:</span>
       <span class="keyword">return</span> <span class="string">&quot;first&quot;</span><span class="symbol">;</span>
   <span class="keyword">case</span> <span class="number">111</span><span class="symbol">:</span>
       <span class="keyword">return</span> <span class="string">&quot;a hundred eleven&quot;</span><span class="symbol">;</span>
   <span class="keyword">default</span><span class="symbol">:</span>
       <span class="keyword">return</span> <span class="string">&quot;unsupported&quot;</span><span class="symbol">;</span>
   <span class="symbol">}</span>
<span class="symbol">}</span>

<span class="gtkdoc kwc">typedef</span> <span class="gtkdoc kwb">struct</span> _TranslateTestData
<span class="symbol">{</span>
    <span class="gtkdoc kwb">char</span> <span class="symbol">*</span>translated<span class="symbol">;</span>
    <span class="gtkdoc kwb">int</span> input<span class="symbol">;</span>
<span class="symbol">}</span> TranslateTestData<span class="symbol">;</span>

<span class="gtkdoc kwb">static</span> TranslateTestData <span class="symbol">*</span>
<span class="function">translate_test_data_new</span> <span class="symbol">(</span><span class="gtkdoc kwb">char</span> <span class="symbol">*</span>translated<span class="symbol">,</span> <span class="gtkdoc kwb">int</span> input<span class="symbol">)</span>
<span class="symbol">{</span>
    TranslateTestData <span class="symbol">*</span>data<span class="symbol">;</span>

    data <span class="symbol">=</span> <span class="function">malloc</span><span class="symbol">(</span><span class="keyword">sizeof</span><span class="symbol">(</span>TranslateTestData<span class="symbol">));</span>
    data<span class="symbol">-&gt;</span>translated <span class="symbol">=</span> <span class="function">strdup</span><span class="symbol">(</span>translated<span class="symbol">);</span>
    data<span class="symbol">-&gt;</span>input <span class="symbol">=</span> input<span class="symbol">;</span>

    <span class="keyword">return</span> data<span class="symbol">;</span>
<span class="symbol">}</span>

<span class="gtkdoc kwb">static void</span>
<span class="function">translate_test_data_free</span> <span class="symbol">(</span>TranslateTestData <span class="symbol">*</span>data<span class="symbol">)</span>
<span class="symbol">{</span>
    <span class="function">free</span><span class="symbol">(</span>data<span class="symbol">-&gt;</span>translated<span class="symbol">);</span>
    <span class="function">free</span><span class="symbol">(</span>data<span class="symbol">);</span>
<span class="symbol">}</span>

<span class="gtkdoc kwb">void</span>
<span class="function">data_translate</span><span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">)</span>
<span class="symbol">{</span>
    <span class="function"><a href="../cutter/ja/cutter-Cutter.html#cut-add-data">cut_add_data</a></span><span class="symbol">(</span><span class="string">&quot;simple data&quot;</span><span class="symbol">,</span>
                 <span class="function">translate_test_data_new</span><span class="symbol">(</span><span class="string">&quot;first&quot;</span><span class="symbol">,</span> <span class="number">1</span><span class="symbol">),</span>
                 translate_test_data_free<span class="symbol">,</span>
                 <span class="string">&quot;complex data&quot;</span><span class="symbol">,</span>
                 <span class="function">translate_test_data_new</span><span class="symbol">(</span><span class="string">&quot;a hundred eleven&quot;</span><span class="symbol">,</span> <span class="number">111</span><span class="symbol">),</span>
                 translate_test_data_free<span class="symbol">,</span>
                 NULL<span class="symbol">);</span>
<span class="symbol">}</span>

<span class="gtkdoc kwb">void</span>
<span class="function">test_translate</span><span class="symbol">(</span><span class="gtkdoc kwb">const void</span> <span class="symbol">*</span>data<span class="symbol">)</span>
<span class="symbol">{</span>
     <span class="gtkdoc kwb">const</span> TranslateTestData <span class="symbol">*</span>test_data <span class="symbol">=</span> data<span class="symbol">;</span>

     <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-string">cut_assert_equal_string</a></span><span class="symbol">(</span>test_data<span class="symbol">-&gt;</span>translated<span class="symbol">,</span>
                             <span class="function">translate</span><span class="symbol">(</span>test_data<span class="symbol">-&gt;</span>input<span class="symbol">));</span>
<span class="symbol">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>first_data_name</code></em> :</span></p></td>
<td>最初のデータ名。</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>...</code></em> :</span></p></td>
<td>最初のデータとデータ破棄関数。続けて任意の数の「名前・データ・データ破棄関数(<a class="link" href="cutter-Types.html#CutDestroyFunction" title="CutDestroyFunction ()"><span class="type">CutDestroyFunction</span></a>)」の三つ組を指定します。1.0.6から可変長の引数は<code class="literal">NULL</code>終端しなければいけなくなりました。</td>
</tr>
</tbody>
</table></div>
<p class="since">1.0.3から</p>
</div>
<hr>
<div class="refsect2" title="cut_add_data_backward_compatibility()">
<a name="cut-add-data-backward-compatibility"></a><h3>cut_add_data_backward_compatibility()</h3>
<pre class="programlisting">#define             cut_add_data_backward_compatibility(context, ...)</pre>
<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">cut_add_data_backward_compatibility</code>は非推奨です。新しいコードでは使わないでください。</p>
</div>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>...</code></em> :</span></p></td>
<td>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="cut_set_attributes()">
<a name="cut-set-attributes"></a><h3>cut_set_attributes()</h3>
<pre class="programlisting">#define             cut_set_attributes(first_attribute_name, ...)</pre>
<p>テストの属性を設定します。</p>
<p>例: </p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="preproc">#include &lt;cutter.h&gt;</span>

<span class="gtkdoc kwb">void</span> <span class="function">attributes_repeat</span> <span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">);</span>
<span class="gtkdoc kwb">void</span> <span class="function">test_repeat</span> <span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">);</span>

<span class="gtkdoc kwb">void</span>
<span class="function">attributes_repeat</span><span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">)</span>
<span class="symbol">{</span>
    <span class="function"><a href="../cutter/ja/cutter-Cutter.html#cut-set-attributes">cut_set_attributes</a></span><span class="symbol">(</span><span class="string">&quot;description&quot;</span><span class="symbol">,</span> <span class="string">&quot;a test for repeat function&quot;</span><span class="symbol">,</span>
                       <span class="string">&quot;bug&quot;</span><span class="symbol">,</span> <span class="string">&quot;111&quot;</span><span class="symbol">,</span>
                       <span class="string">&quot;priority&quot;</span><span class="symbol">,</span> <span class="string">&quot;high&quot;</span><span class="symbol">,</span>
                       NULL<span class="symbol">);</span>
<span class="symbol">}</span>

<span class="gtkdoc kwb">void</span>
<span class="function">test_repeat</span><span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">)</span>
<span class="symbol">{</span>
     <span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-string-with-free">cut_assert_equal_string_with_free</a></span><span class="symbol">(</span><span class="string">&quot;XXX&quot;</span><span class="symbol">,</span> <span class="function">repeat</span><span class="symbol">(</span><span class="string">&quot;X&quot;</span><span class="symbol">,</span> <span class="number">3</span><span class="symbol">));</span>
<span class="symbol">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>first_attribute_name</code></em> :</span></p></td>
<td>最初の属性名。</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>...</code></em> :</span></p></td>
<td>最初の属性値です。その後に任意個数の名前と値のペアが続きます。1.0.7から<code class="literal">NULL</code>終端が必須になりました。</td>
</tr>
</tbody>
</table></div>
<p class="since">1.0.4から</p>
</div>
<hr>
<div class="refsect2" title="cut_get_current_test_context">
<a name="cut-get-current-test-context"></a><h3>cut_get_current_test_context</h3>
<pre class="programlisting">#define             cut_get_current_test_context()</pre>
<p>現在のテストコンテキストを返します。「現在のテストコンテキスト」はスレッドローカルなオブジェクトです。もしテストの中で新しいスレッドを作らない場合はテストコンテキストを気にする必要はありません。新しいスレッドを作る場合だけ必要になります。テストのスレッドが持っている「現在のテストコンテキスト」を新しく作ったスレッドに渡す必要がありません。</p>
<p>例: </p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="gtkdoc kwb">int</span>
<span class="function">your_thread_function</span><span class="symbol">(</span><span class="gtkdoc kwb">void</span> <span class="symbol">*</span>data<span class="symbol">)</span>
<span class="symbol">{</span>
    CutTestContext <span class="symbol">*</span>test_context <span class="symbol">=</span> data<span class="symbol">;</span>
    <span class="function"><a href="../cutter/ja/cutter-Cutter.html#cut-set-current-test-context">cut_set_current_test_context</a></span><span class="symbol">(</span>test_context<span class="symbol">);</span>
    <span class="symbol">...</span>
<span class="symbol">}</span>

<span class="gtkdoc kwb">void</span>
<span class="function">run_your_thread</span><span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">)</span>
<span class="symbol">{</span>
    <span class="gtkdoc kwb">int</span> result<span class="symbol">;</span>
    pthread_t your_thread<span class="symbol">;</span>

    result <span class="symbol">=</span> <span class="function">pthread_create</span><span class="symbol">(&amp;</span>your_thread<span class="symbol">,</span> NULL<span class="symbol">,</span>
                            your_thread_function<span class="symbol">,</span>
                            <span class="function"><a href="../cutter/ja/cutter-Cutter.html#cut-get-current-test-context">cut_get_current_test_context</a></span><span class="symbol">());</span>
    <span class="symbol">...</span>
<span class="symbol">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>戻り値</em></span> :</span></p></td>
<td>
<span class="type">CutTestContext</span>オブジェクト。</td>
</tr></tbody>
</table></div>
<p class="since">1.0.4から</p>
</div>
<hr>
<div class="refsect2" title="cut_set_current_test_context()">
<a name="cut-set-current-test-context"></a><h3>cut_set_current_test_context()</h3>
<pre class="programlisting">#define             cut_set_current_test_context(test_context)</pre>
<p>現在のテストコンテキストを<em class="parameter"><code>test_context</code></em>にします。詳細は<a class="link" href="cutter-Cutter.html#cut-get-current-test-context" title="cut_get_current_test_context"><code class="function">cut_get_current_test_context()</code></a>を見てください。</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>test_context</code></em> :</span></p></td>
<td>現在のテストコンテキストになる<span class="type">CutTestContext</span>。</td>
</tr></tbody>
</table></div>
<p class="since">1.0.4から</p>
</div>
<hr>
<div class="refsect2" title="cut_set_message ()">
<a name="cut-set-message"></a><h3>cut_set_message ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_set_message                     (<em class="parameter"><code>const <span class="type">char</span> *format</code></em>,
                                                         <em class="parameter"><code>...</code></em>);</pre>
<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">cut_set_message</code>はバージョン1.1.0から非推奨になりました。新しく書くコードでは使わないでください。代わりに<a class="link" href="cutter-Cutter.html#cut-message" title="cut_message ()"><code class="function">cut_message()</code></a>を使ってください。</p>
</div>
<p>次の検証で使われるメッセージです。</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>format</code></em> :</span></p></td>
<td>整形文字列。<code class="function">printf()</code>のドキュメントを見てください。</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>...</code></em> :</span></p></td>
<td>整形文字列に挿入されるパラメータ。</td>
</tr>
</tbody>
</table></div>
<p class="since">1.0.6から</p>
</div>
<hr>
<div class="refsect2" title="cut_set_message_va_list ()">
<a name="cut-set-message-va-list"></a><h3>cut_set_message_va_list ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_set_message_va_list             (<em class="parameter"><code>const <span class="type">char</span> *format</code></em>,
                                                         <em class="parameter"><code><span class="type">va_list</span> args</code></em>);</pre>
<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">cut_set_message_va_list</code>はバージョン1.1.0から非推奨になりました。新しく書くコードでは使わないで下さい。代わりに<a class="link" href="cutter-Cutter.html#cut-message" title="cut_message ()"><code class="function">cut_message()</code></a>を使ってください。</p>
</div>
<p>次の検証で使われるメッセージです。</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>format</code></em> :</span></p></td>
<td>整形文字列。<code class="function">printf()</code>のドキュメントを見てください。</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>args</code></em> :</span></p></td>
<td>整形文字列に挿入されるパラメータ。</td>
</tr>
</tbody>
</table></div>
<p class="since">1.0.6から</p>
</div>
<hr>
<div class="refsect2" title="cut_keep_message ()">
<a name="cut-keep-message"></a><h3>cut_keep_message ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_keep_message                    (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">cut_keep_message</code>はバージョン1.1.0から非推奨になりました。新しく書くコードでは使わないでください。代わりに<a class="link" href="cutter-Cutter.html#cut-message" title="cut_message ()"><code class="function">cut_message()</code></a>を使ってください。</p>
</div>
<p><a class="link" href="cutter-Cutter.html#cut-set-message" title="cut_set_message ()"><code class="function">cut_set_message()</code></a>または<a class="link" href="cutter-Cutter.html#cut-set-message-va-list" title="cut_set_message_va_list ()"><code class="function">cut_set_message_va_list()</code></a>で設定した現在のメッセージを次の検証の後でも維持します。</p>
<p class="since">1.0.6から</p>
</div>
<hr>
<div class="refsect2" title="cut_message ()">
<a name="cut-message"></a><h3>cut_message ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                cut_message                         (<em class="parameter"><code>const <span class="type">char</span> *format</code></em>,
                                                         <em class="parameter"><code>...</code></em>);</pre>
<p>追加の検証メッセージを指定します。</p>
<p>例: </p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="function"><a href="../cutter/ja/cutter-Assertions.html#cut-assert-equal-string">cut_assert_equal_string</a></span><span class="symbol">(</span><span class="string">&quot;abc&quot;</span><span class="symbol">,</span> <span class="string">&quot;def&quot;</span><span class="symbol">,</span>
                        <span class="function"><a href="../cutter/ja/cutter-Cutter.html#cut-message">cut_message</a></span><span class="symbol">(</span><span class="string">&quot;should fail!&quot;</span><span class="symbol">));</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>format</code></em> :</span></p></td>
<td>整形文字列。<code class="function">printf()</code>のドキュメントを見てください。</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>...</code></em> :</span></p></td>
<td>整形文字列に挿入されるパラメータ。</td>
</tr>
</tbody>
</table></div>
<p class="since">1.1.0から</p>
</div>
<hr>
<div class="refsect2" title="CUT_EXPORT">
<a name="CUT-EXPORT:CAPS"></a><h3>CUT_EXPORT</h3>
<pre class="programlisting">#define             CUT_EXPORT</pre>
<p>公開関数であるというしるしをつけます。このしるしはWindows環境上でだけ必要です。Windows上でもテストを実行したい場合はこのマクロを使う必要があります。そうでなければ使う必要はありません。</p>
<p>例: </p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5</pre></td>
        <td class="listing_code"><pre class="programlisting">CUT_EXPORT <span class="gtkdoc kwb">void</span>
<span class="function">test_add</span> <span class="symbol">(</span><span class="gtkdoc kwb">void</span><span class="symbol">)</span>
<span class="symbol">{</span>
  <span class="symbol">...</span>
<span class="symbol">}</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<p class="since">1.1.2から</p>
</div>
</div>
<div class="refsect1" title="参考">
<a name="cutter-Cutter.see-also"></a><h2>参考</h2>
<a class="link" href="cutter-Assertions.html" title="検証">検証</a>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.15</div>
</body>
</html>